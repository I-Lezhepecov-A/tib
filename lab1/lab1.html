<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body id='body'> 

    <script>
    document.cookie = "image0=C:/fakepath/123.jpg"

    function getLengthOfCookies () {
        return document.cookie.split(';').length
    }

    function showAllCookies() {
        alert(document.cookie);
    }

    function getArrayOfCookies(){
        cookies = document.cookie.split(';')
        return cookies
    }

    function getFileNames(){
        cookies = getArrayOfCookies()
        array_of_files = []
        cookies.forEach(c => {
            array_of_files.push(c.split('=')[1].slice(12))  //image0=C:/fakepath/123.jpg --> 123.jpg
        })
        console.log(array_of_files)
        return array_of_files

    }
        
    getFileNames()

    function storeFileIntoCookie (){
        newFile = document.getElementById('newImage')
        console.log(newFile.value)
        index_of_image = getLengthOfCookies() 
        document.cookie=`image${index_of_image} = ${newFile.value}`
    }

    function deleteAllCookies() {
        const cookies = document.cookie.split(";");
        for (const cookie of cookies) {
            const eqPos = cookie.indexOf("=");
            const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
            document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
        }
    } 

    function returnImagesFromCookies(){
        cookies = getFileNames()
        cookies.forEach(c => {
            var newDiv = document.createElement("div");
            var img = new Image();
            img.src = c
            my_div = document.getElementById("body").appendChild(img);
            document.body.insertBefore(newDiv, my_div);
        });
    }

    </script>

    <button onclick="showAllCookies()">Show cookies</button>

    <button onclick="deleteAllCookies()">
        Clear
    </button>

    <button onclick="returnImagesFromCookies()">
        Clear123
    </button>

    <div>
        <input id='newImage' name="image" type="file" >
        <button onclick="storeFileIntoCookie()">Submit</button>
    </div>  
    
</body>
</html>